<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="Kotti"
      metal:use-macro="api.macro('kotti:templates/edit/master.pt')">

  <div metal:fill-slot="content">
    <h1 i18n:translate="">Add item</h1>

      <form action="${request.url}" method="post"
            class="form-horizontal">
        <fieldset tal:condition="len(possible_types) &gt; 1">
          <legend  i18n:translate="">What do you want to add?</legend>
          <div class="control-group" tal:repeat="type possible_types">
            <tal:define tal:define="type_name type['factory'].type_info.name;
                                    type_title type['factory'].type_info.title">
              <label class="control-label" for="what-to-add-${type_name}">
                ${type_title}
              </label>
              <div class="controls">
                <input type="radio" name="what"
                       value="${type_name}"
                       checked="${type == possible_types[0] and 'checked' or None}"
                       id="what-to-add-${type_name}" />
              </div>
            </tal:define>
          </div>
        </fieldset>
        <div>
        <input type="hidden" name="what"
               value="${possible_types[0]['factory'].type_info.name}"
               tal:condition="len(possible_types) == 1" />
        </div>

        <fieldset tal:condition="len(possible_parents) &gt; 1">
          <legend i18n:translate="">Which folder do you want to add to?</legend>
          <div class="control-group" tal:repeat="parent possible_parents[:2]">
            <label class="control-label"
                   for="where-to-add-${parent['node'].id}"
                   tal:define="url api.url(parent['node'])"
                   i18n:translate="">
              Add to <em i18n:name="title">${parent['node'].title}</em>
            </label>
            <div class="controls">
              <input type="radio" name="where" value="${parent['node'].id}"
                     checked="${parent == possible_parents[0] and 'checked' or None}"
                     id="where-to-add-${parent['node'].id}" />
            </div>
          </div>
        </fieldset>
        <div>
        <input type="hidden" name="where"
               value="${possible_parents[0]['node'].id}"
               tal:condition="len(possible_parents) == 1" />
        </div>

        <div class="form-actions">
          <input type="submit" value="Continue" class="btn btn-primary"
                 i18n:attributes="value" />
        </div>
      </form>
    </div>

</html>
